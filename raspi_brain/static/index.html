<html>

<head>
  <style>
    body,
    #container {
      width: 100%;
      padding: 0px;
      margin: 0px;
    }
  </style>
</head>

<body>
  <div id="container">
  </div>

  <script src="./jquery-3.4.1.min.js"></script>
  <script src="./p5.min.js"></script>
  <script src="./p5.dom.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    let driveButton, driveTillHitButton;
    function setup() {
      createCanvas(800, 400);
      driveButton = createButton('drive');
      driveButton.mousePressed(() => {
        socket.emit('client', { command: 'drive', steps: 1000 })
      });
      driveTillHitButton = createButton('drive till hit');
      driveTillHitButton.mousePressed(() => {
        socket.emit('client', { command: 'driveTillHit' })
      });
    }

    let bumper = { status: '' };
    function draw() {
      let bg;
      if (bumper.status == 'hit') {
        bg = [255, 0, 0];
      }
      else if (bumper.status == 'released') {
        bg = [0, 255, 0];
      }
      else
        bg = [0, 0, 0];
      background(bg[0], bg[1], bg[2]);
    }
    socket.on('bumper', (msg) => {
      console.log(msg)
      bumper = msg;
    });
  </script>
</body>

</html>